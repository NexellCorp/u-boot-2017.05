/*
 * (C) Copyright 2018 Nexell
 * JungHyun, Kim <jhkim@nexell.co.kr>
 *
 * SPDX-License-Identifier:      GPL-2.0+
 */

#include "nxp3220.dtsi"
#include <dt-bindings/gpio/gpio.h>
/ {
	compatible = "nexell,nxp3220";

	aliases {
		serial2 = &uart2;
		i2c0    = &i2c_0;
		spi0	= &spi_0;
	};

	chosen {
		stdout-path = "serial2:115200n8";
		tick-timer = &timer0;
	};

	clock_pll: clock-src@27020000 {
		frequency = <0 1000000000>,
			    <1 400000000>;
	};

	clock_sys: clock-sys@27010000 {
		clk-init-frequency = <UART_2_CORE_CLK 100000000 1>,
				     <UART_2_APB_CLK 100000000 1>,
				     <TIMER_0_APB_CLK 100000000 1>,
				     <TIMER_0_TCLK0_CLK 100000000 1>,
				     <TIMER_0_TCLK1_CLK 100000000 1>,
				     <PWM_0_TCLK0_CLK 100000000 1>,
				     <PWM_0_TCLK1_CLK 100000000 1>,
				     <PWM_0_TCLK2_CLK 100000000 1>,
				     <PWM_0_TCLK3_CLK 100000000 1>,
				     <I2C_0_APB_CLK 100000000 1>,
				     <SPI_0_APB_CLK 100000000 1>,
				     <GMAC_RGMII_0_AXI_CLK 250000000 1>,
				     <GMAC_RGMII_0_APB_CLK 125000000 1>,
				     <GMAC_RGMII_0_TX_CLK_CLK 125000000 1>,
				     <GMAC_RGMII_0_PTP_REF_CLK 25000000 1>,
				     <GMAC_RMII_0_AXI_CLK 250000000 1>,
				     <GMAC_RMII_0_APB_CLK 125000000 1>,
				     <GMAC_RMII_0_PTP_REF_CLK 25000000 1>;
	};
};

&dwc2otg {
	status = "okay";
};

&gmac0 {
	phy-mode = "rgmii";
	phy-handle = <&ethphy0>;
	status = "okay";

	phy-reset-gpios = <&gpio_alv 5 GPIO_ACTIVE_LOW>;

	mdio@3 {
		#address-cells = <1>;
		#size-cells = <0>;

		ethphy0: ethernet-phy@3 {
			reg = <3>;
		};
	};
};

&gmac1 {
	phy-mode = "rmii";
	phy-handle = <&ethphy1>;
	status = "okay";

	phy-reset-gpios = <&gpio_alv 9 GPIO_ACTIVE_LOW>;

	mdio@1 {
		#address-cells = <1>;
		#size-cells = <0>;

		ethphy1: ethernet-phy@1 {
			reg = <1>;
		};
	};
};

&mmc0 {
	nexell,sample_shift = <0x04>;
	nexell,drive_shift = <0x04>;
	frequency = <50000000>;
	status = "okay";
};

&mmc1 {
	nexell,sample_shift = <0x04>;
	nexell,drive_shift = <0x04>;
	frequency = <50000000>;
	status = "okay";
};

&mmc2 {
	nexell,sample_shift = <0x04>;
	nexell,drive_shift = <0x04>;
	frequency = <50000000>;
	status = "okay";
};

&nand {
	nand-ecc-strength = <4>;
	nand-ecc-step-size = <512>;
	nand-timing-mode = <4>;
	nexell,wp-gpio = <&gpio_c 16 GPIO_ACTIVE_HIGH>;
};

&nand_data {
	nexell,pin-strength = <NX_PIN_STR3>;
};

&nand_cs0 {
	nexell,pin-strength = <NX_PIN_STR2>;
};

&nand_cs1 {
	nexell,pin-strength = <NX_PIN_STR2>;
};

&uart2 {
	clock-frequency = <100000000>;
	status = "okay";
};

&udown {
	status = "okay";
};

&i2c_0 {
	status = "okay";
};

&spi_0 {
	num-cs = <1>;
	cs-gpio = <&gpio_c 4 0>;
	status = "okay";
};

&usb2phy {
	status = "okay";
};
